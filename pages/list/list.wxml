<view >
  <view class="nav">    
    <scroll-view  
      scroll-with-animation="{{true}}" 
      scroll-into-view="a{{index}}"  
      enable-flex="true" 
      scroll-x="true" 
    class="sub-nav">
      <view
        id="a{{index}}"
        wx:for="{{buildings}}"
        wx:key="index"
        class="nav-item {{choosedBuilding == item ? 'choosed' : ''}}"
        data-building="{{item}}"
        bindtap="tapBuilding"
      >
        {{item}}
      </view>
    </scroll-view>
  </view> 
  <view class="build-info">(beta) 距离{{distance[index]}}米，走路预计{{distance[index]/50}}分钟</view>
   <view class="table">
    <view class="tr comment">
      <view class="comment-cell">
        <view class="status free"></view><view class="comment-item c1">空闲</view>
        <view class="status inuse"></view><view class="comment-item c2">有课</view> 
        <view class="status busy"></view><view class="comment-item c3">被占</view> 
      </view>
      <view class="comment-cell">
        <view class="comment-item c4">| 上午</view> 
        <view class="comment-item c5"> t1</view> 
        <view class="comment-item c6">| 下午</view> 
        <view class="comment-item c7"> t2</view> 
        <view class="comment-item c8">| 晚上</view> 
      </view>
      </view>
  </view>
  <van-tabs 
    active="{{choosedBuilding}}" 
    bind:change="changeTabs" 
    nav-class="tabs" 
    swipeable   
    lazy-render    
  >
    <block
        wx:for="{{buildings}}"
        wx:key="index"
        data-campus="{{item}}"      
      >
      <van-tab name="{{item}}">
    <view wx:if="{{data}}" style="min-height:90vh">
      <view
        wx:for="{{data[index]['classList']}}"
        wx:for-index="roomName"
        wx:for-item="statusList"
        wx:key="roomName"
        class="tr"                
      > 
        <view class="td room-name-tuple" bindtap="tapCourse">
          <view class="room-name">{{statusList['rname']}}</view>
          <view class="room-metadata">
            <view>座位数 {{ statusList['rspace']}}</view>
            <view wx:if="{{statusList['typeDesc']}}">/ {{statusList['typeDesc']}}</view>
          </view>
        </view>
        <view class="td status-list">
          <view
            wx:for="{{[1,2,3,4,5]}}"
            wx:for-item="n"
            wx:key="n"            
            class=
            "status {{statusList['status'][n-1] == 1 ? 'inuse' : ''}}{{statusList['status'][n-1] == 0? 'free':''}}{{statusList['status'][n-1] == -1? 'busy':''}} {{nowInterval == n ? 'now' : ''}}"
          ></view>
          <view class="delimiter"></view>
          <view
            wx:for="{{[6,7,8,9,10]}}"
            wx:for-item="n"
            wx:key="n"
            class="status {{statusList['status'][n-1] == 1 ? 'inuse' : ''}}{{statusList['status'][n-1] == 0? 'free':''}}{{statusList['status'][n-1] == -1? 'busy':''}} {{nowInterval == n  ? 'now' : ''}}"
          ></view>
          <view class="delimiter"></view>
          <view
            wx:for="{{[11,12,13]}}"
            wx:for-item="n"
            wx:key="n"
            class="status {{statusList['status'][n-1] == 1 ? 'inuse' : ''}}{{statusList['status'][n-1] == 0? 'free':''}}{{statusList['status'][n-1] == -1? 'busy':''}} {{nowInterval == n  ? 'now' : ''}}"
          ></view>
        </view>
      </view>
    </view>
    <view wx:else>
      <view 
        wx:for="{{[0]}}"
        wx:key="index"
        class="tr"
      >
        <view class="td room-name" >{{ index == 0 ? "数据加载中..." : "" }}</view>
        <view class="td status-list" bindtap="tapCourse">
          <view          
            wx:for="{{[1, 2, 3, 4, 5]}}"
            wx:key="item"
            class="status loading"
          ></view>
          <view class="delimiter"></view>
          <view
            wx:for="{{[6, 7, 8, 9, 10]}}"
            wx:key="item"
            class="status loading"
          ></view>
          <view class="delimiter"></view>
          <view
            wx:for="{{[11, 12, 13, 14]}}"
            wx:key="item"
            class="status loading"
          ></view>
        </view>
      </view>
    </view>  
</van-tab>        
</block>
 
</van-tabs>
</view>
